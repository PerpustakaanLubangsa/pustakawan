<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Admin</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #f0f0f0;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }
    section {
      margin-bottom: 2rem;
    }
    section h2 {
      border-bottom: 2px solid #444;
      padding-bottom: 0.5rem;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      background: #1e1e1e;
      margin: 0.5rem 0;
      padding: 0.75rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 5px;
    }
    .key {
      word-break: break-all;
    }
    button {
      background: #e74c3c;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #c0392b;
    }
    .msg {
      font-style: italic;
      color: #ccc;
    }
  </style>
</head>
<body>

<h1>🔐 Panel Admin</h1>

<section id="pustakawanSec"><h2>👤 Pustakawan</h2><ul id="pustakawan"></ul></section>
<section id="penugasanSec"><h2>📄 Penugasan</h2><ul id="penugasan"></ul></section>
<section id="catatanSec"><h2>📔 Catatan</h2><ul id="catatan"></ul></section>
<section id="chatumumSec"><h2>💬 Chat Umum</h2><ul id="chatumum"></ul></section>
<section id="rapatSec"><h2>📅 Rapat</h2><ul id="rapat"></ul></section>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getDatabase, ref, onValue, remove
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDguC7UH1JUzBQu1JZX8qPJGVeb6Pc7t98",
    authDomain: "pustakawan-26664.firebaseapp.com",
    databaseURL: "https://pustakawan-26664-default-rtdb.firebaseio.com",
    projectId: "pustakawan-26664",
    storageBucket: "pustakawan-26664.appspot.com",
    messagingSenderId: "284579513964",
    appId: "1:284579513964:web:b45f73ac287e1f49eeba49"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const paths = ["pustakawan", "penugasan", "catatan", "chatumum", "rapat"];

  paths.forEach(path => {
    const ul = document.getElementById(path);
    onValue(ref(db, path), snap => {
      ul.innerHTML = "";
      const data = snap.val();
      if (!data) {
        ul.innerHTML = "<li class='msg'>Tidak ada data</li>";
        return;
      }

      Object.entries(data).forEach(([key, val]) => {
        let label = key;

        if (path === "pustakawan") {
          const nama = val.nama || "Tanpa Nama";
          label = `${nama} (${key})`;
        } else if (path === "penugasan") {
          label = `${val.oleh} ➜ ${val.untuk}`;
        } else if (path === "rapat") {
          label = val.judul ? `${val.judul} (${key})` : key;
        } else if (path === "chatumum") {
          label = `${val.nama}: ${val.teks}`;
        } else if (path === "catatan") {
          label = val.judul || key;
        }

        const li = document.createElement("li");
        li.innerHTML = `
          <span class="key">${label}</span>
          <button onclick="hapusItem('${path}', '${key}')">🗑️ Hapus</button>
        `;
        ul.appendChild(li);
      });
    });
  });

  window.hapusItem = function(path, key) {
    if (confirm(`Yakin ingin menghapus entri dari "${path}"?\nID: ${key}`)) {
      remove(ref(db, `${path}/${key}`));
    }
  };
</script>

</body>
</html>